# ADR-20250517-03: API キー入力方式の変更

日付: 2025/05/17 00:47
ステータス: 承認

## コンテキスト
現在、APIキー（AnthropicとOpenAI）は環境変数（.envファイル）から読み込む実装になっています。これでは一般ユーザーにとって使いにくいため、UIから直接入力できるようにする必要があります。

## 決定
以下の変更を実装します：

1. Streamlit UIにAPIキー入力欄を追加：
   - AnthropicのAPIキー入力フィールド
   - OpenAIのAPIキー入力フィールド
   - パスワードマスク表示による秘匿

2. APIクライアント初期化方法の変更：
   - 環境変数ではなく、UIから直接入力された値を使用
   - セッション内でAPIキーを保持

3. 検証ロジック：
   - APIキーが入力されているかの検証
   - 入力後の処理開始を可能に

## 影響
1. APIキーの管理が容易になり、一般ユーザーが使いやすくなる
2. .envファイルの設定が不要になる
3. ユーザーは自分の認証情報を直接入力するため、より直感的な体験となる
4. APIキーはセッション内で保持され、環境変数やファイルには保存されない
